<canvas id="ctx" width="500" height="800" style="border:3px solid #000000;"></canvas>

<script>
var ctx = document.getElementById("ctx").getContext("2d");
ctx.font = '60px Courier New';

var HEIGHT = 800;
var WIDTH = 500;

var player;
var enemy;
var bullet;

createPlayer = function(){

	player = {
		x:220,
		y:780,
		width:60,
		height:20,
		pressingKey:false,
		modNum:0,
	};
}

createEnemy = function(){

	enemy = {
		x:225,
		y:200,
		number:9,
	};
}


createBullet = function(){

	bullet = {
		x:player.x,
		y:player.y,
		spdX:0,
		spdY:-15,
		width:50,
		height:50,
		number:player.modNum,
	};
}

update = function(){

	ctx.clearRect(0,0,WIDTH,HEIGHT);
	updatePlayer();
	updateEnemy();
	updateBullet();
}

updatePlayer = function(){

	drawPlayer();
	if(player.pressingKey){
	
		console.log('press!');
		enemy.number = enemy.number % player.modNum;
	}
}

updateEnemy = function(){
	drawEnemy();
}

updateBullet = function(){

	bullet.x += bullet.spdX;
	bullet.y += bullet.spdY;
	drawBullet();
}

drawPlayer = function(){

	ctx.fillRect(player.x, player.y, player.width, player.height);

}

drawEnemy = function(){

	var text = enemy.number;
	var width = ctx.measureText(text).width;
	ctx.fillText(text, enemy.x-(width/2), enemy.y+20);
	
	ctx.beginPath();
	ctx.arc(enemy.x, enemy.y, 50, 0, 2*Math.PI);
	ctx.closePath();
	ctx.stroke();
}

drawBullet = function(){
	
	
	
	var text = bullet.number;
	var width = ctx.measureText(text).width;
	ctx.fillText(text, bullet.x-(width/2), bullet.y+20);
	
	ctx.beginPath();
	ctx.arc(bullet.x, bullet.y, 50, 0, 2*Math.PI);
	ctx.closePath();
	ctx.stroke();
}

document.onkeydown = function(event){
	player.pressingKey = true;
	//player.modNum = event.keyCode - 48;
	
	switch(event.keyCode){
		case 49 || 97:
			player.modNum = 1;
			break;
		case 50 || 98:
			player.modNum = 2;
			break;
		case 51 || 99:
			player.modNum = 3;
			break;
		case 52 || 100:
			player.modNum = 4;
			break;
		case 53 || 101:
			player.modNum = 5;
			break;
		case 54 || 102:
			player.modNum = 6;
			break;
		case 55 || 103:
			player.modNum = 7;
			break;
		case 56 || 104:
			player.modNum = 8;
			break;
		case 57 || 105:
			player.modNum = 9;
			break;
		default:
			startNewGame();
	}	
}

document.onkeyup = function(event){
	player.pressingKey = false;
	createBullet();
}

startNewGame = function(){
	createPlayer();
	createEnemy();
	createBullet();
}

startNewGame();
setInterval(update, 40);
</script>